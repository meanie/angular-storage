{"version":3,"sources":["meanie-angular-storage.min.js","storage.service.js","engines/cookieStorage.service.js","engines/localStorage.service.js","engines/memoryStorage.service.js","engines/sessionStorage.service.js"],"names":["window","angular","undefined","module","provider","this","prefix","enabledStorageEngines","defaultStorageEngine","setPrefix","substr","setEnabledStorageEngines","isArray","setDefaultStorageEngine","$get","$parse","$injector","getEngineServiceName","engine","getEngineService","engineServices","serviceName","engineService","get","isSupported","fallback","isFunction","getFallbackEngine","console","warn","getPrefixedKey","key","storagePrefix","isStringNumber","string","test","replace","isStringObject","charAt","parseValue","value","isUndefined","isObject","isNumber","toJson","formatValue","fromJson","e","indexOf","Error","forEach","has","StorageEngine","prototype","set","defaultValue","remove","clear","Storage","StorageEngines","Object","defineProperty","factory","$cookies","put","prefixRegex","RegExp","cookies","getAll","keys","k","length","$window","Math","round","random","localStorage","setItem","removeItem","getItem","memoryStore","sessionStorage"],"mappings":"AAOA,cAEA,SCJQA,EAAOC,EAAAC,GDWbD,EAAQE,OAAO,mBAAoB,gCAAiC,gCAAiC,iCAAkC,iCAKtIC,SAAS,WAAY,WAKpBC,KAAKC,OAAS,GAKdD,KAAKE,uBAAyB,QAAS,UAAW,SAAU,UAK5DF,KAAKG,qBAAuB,QAK5BH,KAAKI,UAAY,SAAUH,GCU3B,MDPMA,IAAgC,MAAtBA,EAAOI,aACnBJ,GAAU,KCKhBD,KAAKC,OAAAA,EACCD,MDKJA,KAAKM,yBAA2B,SAAUJ,GCK1C,MDJMN,GAAQW,QAAQL,KAClBF,KAAKE,sBAAwBA,GCG5BF,MDKLA,KAAKQ,wBAA0B,SAAUL,GAEvC,MCAJH,MAAKG,qBAAAA,EDAMH,MAMTA,KAAKS,MAAQ,SAAU,YAAa,SAAUC,EAAQC,GCctD,QAASC,GAAiBC,GDAtB,MAAO,IAAMA,EAAS,UAMxB,QAASC,GAAiBD,GAGxB,GAAIE,EAAeF,GACjB,MAAOE,GAAeF,EAIxB,ICCAG,GAAIJ,EAAAC,GACJI,EAAYN,EAAWO,IAAAF,EDEvB,IAAe,WAAXH,IAAwBI,EAAcE,cAAe,CCIzD,GAAAC,EDAMxB,GAAQyB,WAAWJ,EAAcK,qBACnCF,EAAWH,EAAcK,qBAI3BF,EAAWA,GAAY,SCK3BG,QAAQC,KAAA,iBAAyBX,EAAA,iCAAA,wBAAAO,EAAA,YDD7BH,EAAgBH,EAAiBM,GCQrC,MAAOL,GAAOF,GAAgBI,EAMhC,QAASQ,GAAeC,GACtB,MAAAA,GAAOC,EAAqBD,EAAA,GDE5B,QAASE,GAAeC,GCI1B,MAAS,gBAAeC,KAAAD,EAAQE,QAAA,QAAA,KAOhC,QAASC,GAAWH,GDFhB,MAA4B,MAArBA,EAAOI,OAAO,IAAmC,MAArBJ,EAAOI,OAAO,GAMnD,QAASC,GAAWC,GAGlB,MAAIvC,GAAQwC,YAAYD,IAAoB,OAAVA,EACzB,KAILvC,EAAQyC,SAASF,IAAUvC,EAAQW,QAAQ4B,IAAUvC,EAAQ0C,UAAUH,GAASA,GAC3EvC,EAAQ2C,OAAOJ,GAIjBA,EAMT,QAASK,GAAYL,GAGnB,ICGEA,GAAe,OAARA,GAAiB,SAAAA,EDFxB,MCIF,KDAA,IAAIH,EAAeG,IAAUP,EAAeO,GAC1C,ICKJ,MAAOvC,GAAA6C,SAAAN,GDHD,MAAOO,GACP,MAAO,MAKX,MAAOP,GA9GT,GAAIR,GAAgB3B,KAAKC,OACrBC,EAAwBF,KAAKE,sBAC7BC,EAAuBH,KAAKG,qBAG5BY,IAiHJ,ICMAb,EAAmByC,QAAAxC,QDLjB,KCMA,IAAMyC,OAAI,yBACUzC,EAClB,kBDJJP,GAAQiD,QAAQ3C,EAAuB,SAAUW,GAC/C,GAAIG,GAAcJ,EAAqBC,EACvC,KAAKF,EAAUmC,IAAI9B,GACjB,KAAM,IAAI4B,OAAM,iBAAkB/B,EAAQ,kBAAmB,wBAAyBG,EAAa,iCCoBzG,IAAA+B,GAAc,SAAyBlC,GDRnCb,KAAKa,OAASC,EAAiBD,GAMjCkC,GAAcC,UAAUC,IAAM,SAAUvB,EAAKS,GAI3C,GADAT,EAAMD,EAAeC,IAChBA,ECUP,OAAI,CDLFS,GCUAD,EAAOC,EDPP,KAEE,MADAnC,MAAKa,OAAOoC,IAAIvB,EAAKS,IACd,EACP,MAAOO,GCWb,OAAA,IDHEK,EAAcC,UAAU9B,IAAM,SAAUQ,EAAKwB,GAS3C,GCIO,mBAAAA,KDTLA,EAAe,MAIjBxB,ECUID,EAAaC,IACjBA,EDTE,MCUAwB,EDNF,KACE,GAAIf,GAAQnC,KAAKa,OAAOK,IAAIQ,EAC5B,OAAc,QAAVS,EACKe,EAEFV,EAAYL,GACnB,MAAOO,GCYb,MAAAQ,KDJEH,EAAcC,UAAUG,OAAS,SAAUzB,GAIzC,GADAA,ECWAD,EAAmBC,IACnBA,EAEF,OAAO,CDRL,KAEE,MADA1B,MAAKa,OAAOsC,OAAOzB,IACZ,EACP,MAAOgB,GCab,OAAA,IDLEK,EAAcC,UAAUI,MAAQ,SAAUnD,GACxCA,EAAS0B,GAAiB1B,GAAU,IACpCD,KAAKa,OAAOuC,MAAMnD,GCoBtB,IAAAoD,GAAQ,GAAQN,GAAA5C,GACdmD,IC3TiC,OFkTjCA,GCYOnD,GAAWkD,EDTlBzD,EAAQiD,QAAQ3C,EAAuB,SAAUW,GAC/C0C,OCYEC,eAAQH,EAAexC,GDTvBK,IAAK,WACH,MAAIoC,GAAezC,GACVyC,EAAezC,GAEjByC,EAAezC,GAAU,GAAIkC,GAAclC,QE7TvBwC,OFsUpC1D,OAAQA,OAAOC,SAGlB,SEpUQD,EAAOC,EAAAC,GF2UbD,EAAQE,OAAO,oCAKd2D,QEnUC,kBAAa,YAAA,SAAA9C,GFsUb,GAAI+C,EAUJ,OATI/C,GAAUmC,IAAI,YAChBY,EAAW/C,EAAUO,IAAI,YAEzBK,QAAQC,KAAK,oEExTfL,YAAA,WACE,QAAOuC,GAMTpC,kBAAc,WACZ,MAAA,UAMF2B,IAAK,SAASvB,EAAKS,GACjBuB,EAAOC,IAAAjC,EAASS,IAMlBjB,IAAA,SAAQQ,GACN,MAAAgC,GAAgBxC,IAAAQ,IAMlByB,OAAO,SAASzB,GFoUZgC,EAASP,OAAOzB,IAMlB0B,MAAO,SAAenD,GAQpB,IAAK,GExUH2D,GAAS3D,EAAY,GAAA4D,QAAA,IAAA5D,GAAA,KFoUnB6D,EAAUJ,EAASK,SACnBC,EAAOF,EAAUP,OAAOS,KAAKF,MAGxBG,EAAI,EAAGA,EAAID,EAAKE,OAAQD,IEjU9BhE,IAAO2D,EAjFlB9B,KAAAkC,EAAAC,KCAAP,EAAAP,OAAAa,EAAAC,UH0ZGtE,OAAQA,OAAOC,SAGlB,SGxZQD,EAAOC,EAAAC,GH+ZbD,EAAQE,OAAO,mCAKd2D,QAAQ,iBAAkB,UAAW,SAAuBU,GAK3D,OAKEhD,YGxZU,WH2ZR,GGvZFO,GAAO,MAAG0C,KAAAC,MAAA,IAAAD,KAAAE,SH0ZR,KAGE,MAFAH,GAAQI,aAAaC,QAAQ9C,EAAK,IAClCyC,EAAQI,aAAaE,WAAW/C,IACzB,EACP,MAAOgB,GGtZb,OAAA,IAOApB,kBAAc,WACZ,MAAA,UAMF2B,IAAK,SAASvB,EAAKS,GACjBgC,EAAOI,aAAQC,QAAa9C,EAAAS,IAM9BjB,IAAA,SAAQQ,GACN,MAAAyC,GAAQI,aAAaG,QAAWhD,IAMlCyB,OAAO,SAASzB,GHwZZyC,EAAQI,aAAaE,WAAW/C,IAMlC0B,MGvZK,SAAenD,GH8ZlB,IAAK,GAJD2D,GAAc3D,EAAS,GAAI4D,QAAO,IAAM5D,GAAU,KAClD+D,EAAOT,OAAOS,KAAKG,EAAQI,cAGtBN,EAAI,EAAGA,EAAID,EAAKE,OAAQD,IGrZ9BhE,IAAO2D,EAnFlB9B,KAAAkC,EAAAC,KCAAE,EAAAI,aAAAE,WAAAT,EAAAC,UJgfGtE,OAAQA,OAAOC,SAGlB,SI9eQD,EAAOC,EAAAC,GJqfbD,EAAQE,OAAO,oCAKd2D,QAAQ,iBAAkB,WAKzB,GAAIkB,KAKJ,QIzeAxD,YAAA,WACE,OAAO,GAMTG,kBAAc,WACZ,MAAA,IAMF2B,IAAK,SAASvB,EAAKS,GACjBwC,EAAWjD,GAAAS,GJofXjB,IAAK,SAAaQ,GAChB,MAAgC,mBAArBiD,GAAYjD,GACd,KI5ePiD,EAAOjD,IJofXyB,OAAQ,SAAgBzB,GACU,mBAArBiD,GAAYjD,UI7epBiD,GAASjD,IJqfd0B,MI9eK,SAAenD,GJqflB,IAAK,GAJD2D,GAAc3D,EAAS,GAAI4D,QAAO,IAAM5D,GAAU,KAClD+D,EAAOT,OAAOS,KAAKW,GAGdV,EAAI,EAAGA,EAAID,EAAKE,OAAQD,II5e9BhE,IAAO2D,EAjFlB9B,KAAAkC,EAAAC,WCAAU,GAAAX,EAAAC,SLqkBGtE,OAAQA,OAAOC,SAGlB,SKnkBQD,EAAOC,EAAAC,GL0kBbD,EAAQE,OAAO,qCAKd2D,QAAQ,mBAAoB,UAAW,SAAyBU,GAK/D,OAKEhD,YKnkBU,WLskBR,GKlkBFO,GAAO,MAAG0C,KAAAC,MAAA,IAAAD,KAAAE,SLqkBR,KAGE,MAFAH,GAAQS,eAAeJ,QAAQ9C,EAAK,IACpCyC,EAAQS,eAAeH,WAAW/C,IAC3B,EACP,MAAOgB,GKjkBb,OAAA,IAOApB,kBAAc,WACZ,MAAA,UAMF2B,IAAK,SAASvB,EAAKS,GACjBgC,EAAOS,eAAQJ,QAAe9C,EAAAS,IAMhCjB,IAAA,SAAQQ,GACN,MAAAyC,GAAQS,eAAeF,QAAWhD,IAMpCyB,OAAO,SAASzB,GLmkBZyC,EAAQS,eAAeH,WAAW/C,IAMpC0B,MKlkBK,SAAenD,GLykBlB,IAAK,GAJD2D,GAAc3D,EAAS,GAAI4D,QAAO,IAAM5D,GAAU,KAClD+D,EAAOT,OAAOS,KAAKG,EAAQS,gBAGtBX,EAAI,EAAGA,EAAID,EAAKE,OAAQD,IKhkB9BhE,IAAO2D,EAnFlB9B,KAAAkC,EAAAC,KLqpBYE,EAAQS,eAAeH,WAAWT,EAAKC,UAMhDtE,OAAQA,OAAOC","file":"meanie-angular-storage.min.js","sourcesContent":["/**\n * meanie-angular-storage - v1.1.3 - 18-6-2016\n * https://github.com/meanie/angular-storage\n *\n * Copyright (c) 2016 Adam Buczynski <me@adambuczynski.com>\n * License: MIT\n */\n'use strict';\n\n(function (window, angular, undefined) {\n  'use strict';\n\n  /**\n   * Module definition and dependencies\n   */\n\n  angular.module('Storage.Service', ['Storage.MemoryStorage.Service', 'Storage.CookieStorage.Service', 'Storage.SessionStorage.Service', 'Storage.LocalStorage.Service'])\n\n  /**\n   * Provider definition\n   */\n  .provider('$storage', function $storageProvider() {\n\n    /**\n     * Global prefix\n     */\n    this.prefix = '';\n\n    /**\n     * Enabled storage engines\n     */\n    this.enabledStorageEngines = ['local', 'session', 'cookie', 'memory'];\n\n    /**\n     * Default storage engine\n     */\n    this.defaultStorageEngine = 'local';\n\n    /**\n     * Set prefix\n     */\n    this.setPrefix = function (prefix) {\n\n      //Append dot if there isn't one\n      if (prefix && prefix.substr(-1) !== '.') {\n        prefix += '.';\n      }\n\n      //Set prefix\n      this.prefix = prefix;\n      return this;\n    };\n\n    /**\n     * Set enabled storage engines\n     */\n    this.setEnabledStorageEngines = function (enabledStorageEngines) {\n      if (angular.isArray(enabledStorageEngines)) {\n        this.enabledStorageEngines = enabledStorageEngines;\n      }\n      return this;\n    };\n\n    /**\n     * Set default storage engine\n     */\n    this.setDefaultStorageEngine = function (defaultStorageEngine) {\n      this.defaultStorageEngine = defaultStorageEngine;\n      return this;\n    };\n\n    /**\n     * Service getter\n     */\n    this.$get = ['$parse', '$injector', function ($parse, $injector) {\n\n      //Set configuration vars locally\n      var storagePrefix = this.prefix;\n      var enabledStorageEngines = this.enabledStorageEngines;\n      var defaultStorageEngine = this.defaultStorageEngine;\n\n      //Cached engine service instances\n      var engineServices = {};\n\n      /**\n       * Get storage engine service name\n       */\n      function getEngineServiceName(engine) {\n        return '$' + engine + 'Storage';\n      }\n\n      /**\n       * Get storage engine service instance\n       */\n      function getEngineService(engine) {\n\n        //Cached?\n        if (engineServices[engine]) {\n          return engineServices[engine];\n        }\n\n        //Get the engine service\n        var serviceName = getEngineServiceName(engine);\n        var engineService = $injector.get(serviceName);\n\n        //Not supported\n        if (engine !== 'memory' && !engineService.isSupported()) {\n\n          //Determine fallback\n          var fallback;\n          if (angular.isFunction(engineService.getFallbackEngine)) {\n            fallback = engineService.getFallbackEngine();\n          }\n\n          //Validate fallback and log warning\n          fallback = fallback || 'memory';\n          console.warn('Storage engine', engine, 'not supported in this browser.', 'Using fallback engine', fallback, 'instead.');\n\n          //Get fallback engine\n          engineService = getEngineService(fallback);\n        }\n\n        //Cache and return the service\n        return engineServices[engine] = engineService;\n      }\n\n      /**\n       * Get prefixed key\n       */\n      function getPrefixedKey(key) {\n        return key ? storagePrefix + key : '';\n      }\n\n      /**\n       * Test if string only contains numbers\n       */\n      function isStringNumber(string) {\n        return (/^-?\\d+\\.?\\d*$/.test(string.replace(/[\"']/g, ''))\n        );\n      }\n\n      /**\n       * Test if a string is an object/array\n       */\n      function isStringObject(string) {\n        return string.charAt(0) === '{' || string.charAt(0) === '[';\n      }\n\n      /**\n       * Helper to parse a value for storage\n       */\n      function parseValue(value) {\n\n        //Normalize undefined values\n        if (angular.isUndefined(value) || value === null) {\n          return null;\n        }\n\n        //Convert to JSON if not a string\n        if (angular.isObject(value) || angular.isArray(value) || angular.isNumber(+value || value)) {\n          return angular.toJson(value);\n        }\n\n        //Use as is\n        return value;\n      }\n\n      /**\n       * Helper to format a value from storage\n       */\n      function formatValue(value) {\n\n        //Null values (also convert string null value)\n        if (!value || value === null || value === 'null') {\n          return null;\n        }\n\n        //Parse from JSON if needed\n        if (isStringObject(value) || isStringNumber(value)) {\n          try {\n            return angular.fromJson(value);\n          } catch (e) {\n            return null;\n          }\n        }\n\n        //Return as is\n        return value;\n      }\n\n      /*****************************************************************************\n       * Initialization\n       ***/\n\n      //Make sure the default storage engine is enabled\n      if (enabledStorageEngines.indexOf(defaultStorageEngine) === -1) {\n        throw new Error('Default storage engine', defaultStorageEngine, 'is not enabled.');\n      }\n\n      //Validate enabled storage engines\n      angular.forEach(enabledStorageEngines, function (engine) {\n        var serviceName = getEngineServiceName(engine);\n        if (!$injector.has(serviceName)) {\n          throw new Error('Storage engine', engine, 'does not exist.', 'Make sure the service', serviceName, 'is included as a dependency.');\n        }\n      });\n\n      /*****************************************************************************\n       * Storage engine instances class\n       ***/\n\n      /**\n       * Storage engine instance constructor\n       */\n      var StorageEngine = function StorageEngine(engine) {\n        this.engine = getEngineService(engine);\n      };\n\n      /**\n       * Setter\n       */\n      StorageEngine.prototype.set = function (key, value) {\n\n        //Must have a key\n        key = getPrefixedKey(key);\n        if (!key) {\n          return false;\n        }\n\n        //Parse value\n        value = parseValue(value);\n\n        //Store value\n        try {\n          this.engine.set(key, value);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      };\n\n      /**\n       * Getter\n       */\n      StorageEngine.prototype.get = function (key, defaultValue) {\n\n        //Default value of default value is set to null (defaultvalueception!)\n        if (typeof defaultValue === 'undefined') {\n          defaultValue = null;\n        }\n\n        //Must have a key\n        key = getPrefixedKey(key);\n        if (!key) {\n          return defaultValue;\n        }\n\n        //Get value and return formatted\n        try {\n          var value = this.engine.get(key);\n          if (value === null) {\n            return defaultValue;\n          }\n          return formatValue(value);\n        } catch (e) {\n          return defaultValue;\n        }\n      };\n\n      /**\n       * Remover\n       */\n      StorageEngine.prototype.remove = function (key) {\n\n        //Must have a key\n        key = getPrefixedKey(key);\n        if (!key) {\n          return false;\n        }\n\n        //Remove\n        try {\n          this.engine.remove(key);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      };\n\n      /**\n       * Clear, optionally prefixed\n       */\n      StorageEngine.prototype.clear = function (prefix) {\n        prefix = storagePrefix + (prefix || '');\n        this.engine.clear(prefix);\n      };\n\n      /*****************************************************************************\n       * Exposed storage service\n       ***/\n\n      //Create default storage engine service and initialize engines cache\n      var Storage = new StorageEngine(defaultStorageEngine);\n      var StorageEngines = {};\n\n      //Store ourselves in the cache as the default storage engine\n      StorageEngines[defaultStorageEngine] = Storage;\n\n      //Create dynamic properties for all enabled storage engines\n      angular.forEach(enabledStorageEngines, function (engine) {\n        Object.defineProperty(Storage, engine, {\n\n          /*jshint -W083 */\n          get: function get() {\n            if (StorageEngines[engine]) {\n              return StorageEngines[engine];\n            }\n            return StorageEngines[engine] = new StorageEngine(engine);\n          }\n        });\n      });\n\n      //Return\n      return Storage;\n    }];\n  });\n})(window, window.angular);\n'use strict';\n\n(function (window, angular, undefined) {\n  'use strict';\n\n  /**\n   * Module definition and dependencies\n   */\n\n  angular.module('Storage.CookieStorage.Service', [])\n\n  /**\n   * Cookie storage engine service\n   */\n  .factory('$cookieStorage', ['$injector', function $cookieStorage($injector) {\n\n    //Get cookies service\n    var $cookies;\n    if ($injector.has('$cookies')) {\n      $cookies = $injector.get('$cookies');\n    } else {\n      console.warn('Cookie storage requires the `ngCookies` module as a dependency.');\n    }\n\n    /**\n     * Storage engine interface\n     */\n    return {\n\n      /**\n       * Check if supported\n       */\n      isSupported: function isSupported() {\n        return !!$cookies;\n      },\n\n      /**\n       * Get fallback engine\n       */\n      getFallbackEngine: function getFallbackEngine() {\n        return 'memory';\n      },\n\n      /**\n       * Set an item\n       */\n      set: function set(key, value) {\n        $cookies.put(key, value);\n      },\n\n      /**\n       * Get an item\n       */\n      get: function get(key) {\n        return $cookies.get(key);\n      },\n\n      /**\n       * Remove an item\n       */\n      remove: function remove(key) {\n        $cookies.remove(key);\n      },\n\n      /**\n       * Clear items\n       */\n      clear: function clear(prefix) {\n\n        //Get all the cookies and corresponding keys\n        var prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n        var cookies = $cookies.getAll();\n        var keys = cookies ? Object.keys(cookies) : [];\n\n        //Loop keys\n        for (var k = 0; k < keys.length; k++) {\n          if (!prefix || prefixRegex.test(keys[k])) {\n            $cookies.remove(keys[k]);\n          }\n        }\n      }\n    };\n  }]);\n})(window, window.angular);\n'use strict';\n\n(function (window, angular, undefined) {\n  'use strict';\n\n  /**\n   * Module definition and dependencies\n   */\n\n  angular.module('Storage.LocalStorage.Service', [])\n\n  /**\n   * Local storage engine service\n   */\n  .factory('$localStorage', ['$window', function $localStorage($window) {\n\n    /**\n     * Storage engine interface\n     */\n    return {\n\n      /**\n       * Check if supported\n       */\n      isSupported: function isSupported() {\n\n        //Prepare test key\n        var key = '___' + Math.round(Math.random() * 1e7);\n\n        //Try local storage\n        try {\n          $window.localStorage.setItem(key, '');\n          $window.localStorage.removeItem(key);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      },\n\n      /**\n       * Get fallback engine\n       */\n      getFallbackEngine: function getFallbackEngine() {\n        return 'cookie';\n      },\n\n      /**\n       * Set an item\n       */\n      set: function set(key, value) {\n        $window.localStorage.setItem(key, value);\n      },\n\n      /**\n       * Get an item\n       */\n      get: function get(key) {\n        return $window.localStorage.getItem(key);\n      },\n\n      /**\n       * Remove an item\n       */\n      remove: function remove(key) {\n        $window.localStorage.removeItem(key);\n      },\n\n      /**\n       * Clear items\n       */\n      clear: function clear(prefix) {\n\n        //Get regex for prefix and keys\n        var prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n        var keys = Object.keys($window.localStorage);\n\n        //Loop keys\n        for (var k = 0; k < keys.length; k++) {\n          if (!prefix || prefixRegex.test(keys[k])) {\n            $window.localStorage.removeItem(keys[k]);\n          }\n        }\n      }\n    };\n  }]);\n})(window, window.angular);\n'use strict';\n\n(function (window, angular, undefined) {\n  'use strict';\n\n  /**\n   * Module definition and dependencies\n   */\n\n  angular.module('Storage.MemoryStorage.Service', [])\n\n  /**\n   * Memory storage engine service\n   */\n  .factory('$memoryStorage', function $memoryStorage() {\n\n    /**\n     * Store\n     */\n    var memoryStore = {};\n\n    /**\n     * Storage engine interface\n     */\n    return {\n\n      /**\n       * Always supported\n       */\n      isSupported: function isSupported() {\n        return true;\n      },\n\n      /**\n       * Get fallback engine\n       */\n      getFallbackEngine: function getFallbackEngine() {\n        return '';\n      },\n\n      /**\n       * Set an item\n       */\n      set: function set(key, value) {\n        memoryStore[key] = value;\n      },\n\n      /**\n       * Get an item\n       */\n      get: function get(key) {\n        if (typeof memoryStore[key] === 'undefined') {\n          return null;\n        }\n        return memoryStore[key];\n      },\n\n      /**\n       * Remove an item\n       */\n      remove: function remove(key) {\n        if (typeof memoryStore[key] !== 'undefined') {\n          delete memoryStore[key];\n        }\n      },\n\n      /**\n       * Clear items\n       */\n      clear: function clear(prefix) {\n\n        //Get regex for prefix and keys\n        var prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n        var keys = Object.keys(memoryStore);\n\n        //Loop keys\n        for (var k = 0; k < keys.length; k++) {\n          if (!prefix || prefixRegex.test(keys[k])) {\n            delete memoryStore[keys[k]];\n          }\n        }\n      }\n    };\n  });\n})(window, window.angular);\n'use strict';\n\n(function (window, angular, undefined) {\n  'use strict';\n\n  /**\n   * Module definition and dependencies\n   */\n\n  angular.module('Storage.SessionStorage.Service', [])\n\n  /**\n   * Session storage engine service\n   */\n  .factory('$sessionStorage', ['$window', function $sessionStorage($window) {\n\n    /**\n     * Storage engine interface\n     */\n    return {\n\n      /**\n       * Check if supported\n       */\n      isSupported: function isSupported() {\n\n        //Prepare test key\n        var key = '___' + Math.round(Math.random() * 1e7);\n\n        //Try session storage\n        try {\n          $window.sessionStorage.setItem(key, '');\n          $window.sessionStorage.removeItem(key);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      },\n\n      /**\n       * Get fallback engine\n       */\n      getFallbackEngine: function getFallbackEngine() {\n        return 'memory';\n      },\n\n      /**\n       * Set an item\n       */\n      set: function set(key, value) {\n        $window.sessionStorage.setItem(key, value);\n      },\n\n      /**\n       * Get an item\n       */\n      get: function get(key) {\n        return $window.sessionStorage.getItem(key);\n      },\n\n      /**\n       * Remove an item\n       */\n      remove: function remove(key) {\n        $window.sessionStorage.removeItem(key);\n      },\n\n      /**\n       * Clear items\n       */\n      clear: function clear(prefix) {\n\n        //Get regex for prefix and keys\n        var prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n        var keys = Object.keys($window.sessionStorage);\n\n        //Loop keys\n        for (var k = 0; k < keys.length; k++) {\n          if (!prefix || prefixRegex.test(keys[k])) {\n            $window.sessionStorage.removeItem(keys[k]);\n          }\n        }\n      }\n    };\n  }]);\n})(window, window.angular);","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Storage.Service', [\n  'Storage.MemoryStorage.Service',\n  'Storage.CookieStorage.Service',\n  'Storage.SessionStorage.Service',\n  'Storage.LocalStorage.Service'\n])\n\n/**\n * Provider definition\n */\n.provider('$storage', function $storageProvider() {\n\n  /**\n   * Global prefix\n   */\n  this.prefix = '';\n\n  /**\n   * Enabled storage engines\n   */\n  this.enabledStorageEngines = ['local', 'session', 'cookie', 'memory'];\n\n  /**\n   * Default storage engine\n   */\n  this.defaultStorageEngine = 'local';\n\n  /**\n   * Set prefix\n   */\n  this.setPrefix = function(prefix) {\n\n    //Append dot if there isn't one\n    if (prefix && prefix.substr(-1) !== '.') {\n      prefix += '.';\n    }\n\n    //Set prefix\n    this.prefix = prefix;\n    return this;\n  };\n\n  /**\n   * Set enabled storage engines\n   */\n  this.setEnabledStorageEngines = function(enabledStorageEngines) {\n    if (angular.isArray(enabledStorageEngines)) {\n      this.enabledStorageEngines = enabledStorageEngines;\n    }\n    return this;\n  };\n\n  /**\n   * Set default storage engine\n   */\n  this.setDefaultStorageEngine = function(defaultStorageEngine) {\n    this.defaultStorageEngine = defaultStorageEngine;\n    return this;\n  };\n\n  /**\n   * Service getter\n   */\n  this.$get = function($parse, $injector) {\n\n    //Set configuration vars locally\n    var storagePrefix = this.prefix;\n    var enabledStorageEngines = this.enabledStorageEngines;\n    var defaultStorageEngine = this.defaultStorageEngine;\n\n    //Cached engine service instances\n    var engineServices = {};\n\n    /**\n     * Get storage engine service name\n     */\n    function getEngineServiceName(engine) {\n      return '$' + engine + 'Storage';\n    }\n\n    /**\n     * Get storage engine service instance\n     */\n    function getEngineService(engine) {\n\n      //Cached?\n      if (engineServices[engine]) {\n        return engineServices[engine];\n      }\n\n      //Get the engine service\n      var serviceName = getEngineServiceName(engine);\n      var engineService = $injector.get(serviceName);\n\n      //Not supported\n      if (engine !== 'memory' && !engineService.isSupported()) {\n\n        //Determine fallback\n        var fallback;\n        if (angular.isFunction(engineService.getFallbackEngine)) {\n          fallback = engineService.getFallbackEngine();\n        }\n\n        //Validate fallback and log warning\n        fallback = fallback || 'memory';\n        console.warn(\n          'Storage engine', engine, 'not supported in this browser.',\n          'Using fallback engine', fallback, 'instead.'\n        );\n\n        //Get fallback engine\n        engineService = getEngineService(fallback);\n      }\n\n      //Cache and return the service\n      return (engineServices[engine] = engineService);\n    }\n\n    /**\n     * Get prefixed key\n     */\n    function getPrefixedKey(key) {\n      return key ? (storagePrefix + key) : '';\n    }\n\n    /**\n     * Test if string only contains numbers\n     */\n    function isStringNumber(string) {\n      return /^-?\\d+\\.?\\d*$/.test(string.replace(/[\"']/g, ''));\n    }\n\n    /**\n     * Test if a string is an object/array\n     */\n    function isStringObject(string) {\n      return (string.charAt(0) === '{' || string.charAt(0) === '[');\n    }\n\n    /**\n     * Helper to parse a value for storage\n     */\n    function parseValue(value) {\n\n      //Normalize undefined values\n      if (angular.isUndefined(value) || value === null) {\n        return null;\n      }\n\n      //Convert to JSON if not a string\n      if (angular.isObject(value) || angular.isArray(value) || angular.isNumber(+value || value)) {\n        return angular.toJson(value);\n      }\n\n      //Use as is\n      return value;\n    }\n\n    /**\n     * Helper to format a value from storage\n     */\n    function formatValue(value) {\n\n      //Null values (also convert string null value)\n      if (!value || value === null || value === 'null') {\n        return null;\n      }\n\n      //Parse from JSON if needed\n      if (isStringObject(value) || isStringNumber(value)) {\n        try {\n          return angular.fromJson(value);\n        }\n        catch (e) {\n          return null;\n        }\n      }\n\n      //Return as is\n      return value;\n    }\n\n    /*****************************************************************************\n     * Initialization\n     ***/\n\n    //Make sure the default storage engine is enabled\n    if (enabledStorageEngines.indexOf(defaultStorageEngine) === -1) {\n      throw new Error(\n        'Default storage engine', defaultStorageEngine, 'is not enabled.'\n      );\n    }\n\n    //Validate enabled storage engines\n    angular.forEach(enabledStorageEngines, function(engine) {\n      var serviceName = getEngineServiceName(engine);\n      if (!$injector.has(serviceName)) {\n        throw new Error(\n          'Storage engine', engine, 'does not exist.',\n          'Make sure the service', serviceName, 'is included as a dependency.'\n        );\n      }\n    });\n\n    /*****************************************************************************\n     * Storage engine instances class\n     ***/\n\n    /**\n     * Storage engine instance constructor\n     */\n    var StorageEngine = function(engine) {\n      this.engine = getEngineService(engine);\n    };\n\n    /**\n     * Setter\n     */\n    StorageEngine.prototype.set = function(key, value) {\n\n      //Must have a key\n      key = getPrefixedKey(key);\n      if (!key) {\n        return false;\n      }\n\n      //Parse value\n      value = parseValue(value);\n\n      //Store value\n      try {\n        this.engine.set(key, value);\n        return true;\n      }\n      catch (e) {\n        return false;\n      }\n    };\n\n    /**\n     * Getter\n     */\n    StorageEngine.prototype.get = function(key, defaultValue) {\n\n      //Default value of default value is set to null (defaultvalueception!)\n      if (typeof defaultValue === 'undefined') {\n        defaultValue = null;\n      }\n\n      //Must have a key\n      key = getPrefixedKey(key);\n      if (!key) {\n        return defaultValue;\n      }\n\n      //Get value and return formatted\n      try {\n        var value = this.engine.get(key);\n        if (value === null) {\n          return defaultValue;\n        }\n        return formatValue(value);\n      }\n      catch (e) {\n        return defaultValue;\n      }\n    };\n\n    /**\n     * Remover\n     */\n    StorageEngine.prototype.remove = function(key) {\n\n      //Must have a key\n      key = getPrefixedKey(key);\n      if (!key) {\n        return false;\n      }\n\n      //Remove\n      try {\n        this.engine.remove(key);\n        return true;\n      }\n      catch (e) {\n        return false;\n      }\n    };\n\n    /**\n     * Clear, optionally prefixed\n     */\n    StorageEngine.prototype.clear = function(prefix) {\n      prefix = storagePrefix + (prefix || '');\n      this.engine.clear(prefix);\n    };\n\n    /*****************************************************************************\n     * Exposed storage service\n     ***/\n\n    //Create default storage engine service and initialize engines cache\n    var Storage = new StorageEngine(defaultStorageEngine);\n    var StorageEngines = {};\n\n    //Store ourselves in the cache as the default storage engine\n    StorageEngines[defaultStorageEngine] = Storage;\n\n    //Create dynamic properties for all enabled storage engines\n    angular.forEach(enabledStorageEngines, function(engine) {\n      Object.defineProperty(Storage, engine, {\n\n        /*jshint -W083 */\n        get: function() {\n          if (StorageEngines[engine]) {\n            return StorageEngines[engine];\n          }\n          return (StorageEngines[engine] = new StorageEngine(engine));\n        }\n      });\n    });\n\n    //Return\n    return Storage;\n  };\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Storage.CookieStorage.Service', [])\n\n/**\n * Cookie storage engine service\n */\n.factory('$cookieStorage', function $cookieStorage($injector) {\n\n  //Get cookies service\n  var $cookies;\n  if ($injector.has('$cookies')) {\n    $cookies = $injector.get('$cookies');\n  }\n  else {\n    console.warn('Cookie storage requires the `ngCookies` module as a dependency.');\n  }\n\n  /**\n   * Storage engine interface\n   */\n  return {\n\n    /**\n     * Check if supported\n     */\n    isSupported: function() {\n      return !!$cookies;\n    },\n\n    /**\n     * Get fallback engine\n     */\n    getFallbackEngine: function() {\n      return 'memory';\n    },\n\n    /**\n     * Set an item\n     */\n    set: function(key, value) {\n      $cookies.put(key, value);\n    },\n\n    /**\n     * Get an item\n     */\n    get: function(key) {\n      return $cookies.get(key);\n    },\n\n    /**\n     * Remove an item\n     */\n    remove: function(key) {\n      $cookies.remove(key);\n    },\n\n    /**\n     * Clear items\n     */\n    clear: function(prefix) {\n\n      //Get all the cookies and corresponding keys\n      var prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n      var cookies = $cookies.getAll();\n      var keys = cookies ? Object.keys(cookies) : [];\n\n      //Loop keys\n      for (var k = 0; k < keys.length; k++) {\n        if (!prefix || prefixRegex.test(keys[k])) {\n          $cookies.remove(keys[k]);\n        }\n      }\n    }\n  };\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Storage.LocalStorage.Service', [])\n\n/**\n * Local storage engine service\n */\n.factory('$localStorage', function $localStorage($window) {\n\n  /**\n   * Storage engine interface\n   */\n  return {\n\n    /**\n     * Check if supported\n     */\n    isSupported: function() {\n\n      //Prepare test key\n      var key = '___' + Math.round(Math.random() * 1e7);\n\n      //Try local storage\n      try {\n        $window.localStorage.setItem(key, '');\n        $window.localStorage.removeItem(key);\n        return true;\n      }\n      catch (e) {\n        return false;\n      }\n    },\n\n    /**\n     * Get fallback engine\n     */\n    getFallbackEngine: function() {\n      return 'cookie';\n    },\n\n    /**\n     * Set an item\n     */\n    set: function(key, value) {\n      $window.localStorage.setItem(key, value);\n    },\n\n    /**\n     * Get an item\n     */\n    get: function(key) {\n      return $window.localStorage.getItem(key);\n    },\n\n    /**\n     * Remove an item\n     */\n    remove: function(key) {\n      $window.localStorage.removeItem(key);\n    },\n\n    /**\n     * Clear items\n     */\n    clear: function(prefix) {\n\n      //Get regex for prefix and keys\n      var prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n      var keys = Object.keys($window.localStorage);\n\n      //Loop keys\n      for (var k = 0; k < keys.length; k++) {\n        if (!prefix || prefixRegex.test(keys[k])) {\n          $window.localStorage.removeItem(keys[k]);\n        }\n      }\n    }\n  };\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Storage.MemoryStorage.Service', [])\n\n/**\n * Memory storage engine service\n */\n.factory('$memoryStorage', function $memoryStorage() {\n\n  /**\n   * Store\n   */\n  var memoryStore = {};\n\n  /**\n   * Storage engine interface\n   */\n  return {\n\n    /**\n     * Always supported\n     */\n    isSupported: function() {\n      return true;\n    },\n\n    /**\n     * Get fallback engine\n     */\n    getFallbackEngine: function() {\n      return '';\n    },\n\n    /**\n     * Set an item\n     */\n    set: function(key, value) {\n      memoryStore[key] = value;\n    },\n\n    /**\n     * Get an item\n     */\n    get: function(key) {\n      if (typeof memoryStore[key] === 'undefined') {\n        return null;\n      }\n      return memoryStore[key];\n    },\n\n    /**\n     * Remove an item\n     */\n    remove: function(key) {\n      if (typeof memoryStore[key] !== 'undefined') {\n        delete memoryStore[key];\n      }\n    },\n\n    /**\n     * Clear items\n     */\n    clear: function(prefix) {\n\n      //Get regex for prefix and keys\n      var prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n      var keys = Object.keys(memoryStore);\n\n      //Loop keys\n      for (var k = 0; k < keys.length; k++) {\n        if (!prefix || prefixRegex.test(keys[k])) {\n          delete memoryStore[keys[k]];\n        }\n      }\n    }\n  };\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Storage.SessionStorage.Service', [])\n\n/**\n * Session storage engine service\n */\n.factory('$sessionStorage', function $sessionStorage($window) {\n\n  /**\n   * Storage engine interface\n   */\n  return {\n\n    /**\n     * Check if supported\n     */\n    isSupported: function() {\n\n      //Prepare test key\n      var key = '___' + Math.round(Math.random() * 1e7);\n\n      //Try session storage\n      try {\n        $window.sessionStorage.setItem(key, '');\n        $window.sessionStorage.removeItem(key);\n        return true;\n      }\n      catch (e) {\n        return false;\n      }\n    },\n\n    /**\n     * Get fallback engine\n     */\n    getFallbackEngine: function() {\n      return 'memory';\n    },\n\n    /**\n     * Set an item\n     */\n    set: function(key, value) {\n      $window.sessionStorage.setItem(key, value);\n    },\n\n    /**\n     * Get an item\n     */\n    get: function(key) {\n      return $window.sessionStorage.getItem(key);\n    },\n\n    /**\n     * Remove an item\n     */\n    remove: function(key) {\n      $window.sessionStorage.removeItem(key);\n    },\n\n    /**\n     * Clear items\n     */\n    clear: function(prefix) {\n\n      //Get regex for prefix and keys\n      var prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n      var keys = Object.keys($window.sessionStorage);\n\n      //Loop keys\n      for (var k = 0; k < keys.length; k++) {\n        if (!prefix || prefixRegex.test(keys[k])) {\n          $window.sessionStorage.removeItem(keys[k]);\n        }\n      }\n    }\n  };\n});\n\n})(window, window.angular);\n"],"sourceRoot":"/source/"}