{"version":3,"sources":["storage.service.js","storage.service.spec.js","engines/cookieStorage.service.js","engines/localStorage.service.js","engines/memoryStorage.service.js","engines/sessionStorage.service.js"],"names":["angular","prefix","substr","setEnabledStorageEngines","setDefaultStorageEngine","$get","getEngineService","engineService","fallback","$log","isFunction","getFallbackEngine","getPrefixedKey","key","isStringNumber","string","isStringObject","parseValue","value","charAt","formatValue","engineServices","engine","enabledStorageEngines","getEngineServiceName","$injector","has","defaultStorageEngine","StorageEngine","prototype","defaultValue","forEach","StorageEngines","Storage","window","$storage","_$storage_","engines","i","length","describe","it","expect","remove","toBe","clear","storedValue","_typeof","testValue","toContain","f","g","h","toBeNull","testKeys","warn","set","get","put","$cookies","prefixRegex","test","keys","k","Math","round","random","localStorage","setItem","$window","getItem","removeItem","memoryStore","sessionStorage"],"mappings":"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","file":"angular-storage.min.js","sourcesContent":["(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Storage.Service', [\n  'Storage.MemoryStorage.Service',\n  'Storage.CookieStorage.Service',\n  'Storage.SessionStorage.Service',\n  'Storage.LocalStorage.Service',\n])\n\n/**\n * Provider definition\n */\n.provider('$storage', function $storageProvider() {\n\n  /**\n   * Global prefix\n   */\n  this.prefix = '';\n\n  /**\n   * Enabled storage engines\n   */\n  this.enabledStorageEngines = ['local', 'session', 'cookie', 'memory'];\n\n  /**\n   * Default storage engine\n   */\n  this.defaultStorageEngine = 'local';\n\n  /**\n   * Set prefix\n   */\n  this.setPrefix = function(prefix) {\n\n    //Append dot if there isn't one\n    if (prefix && prefix.substr(-1) !== '.') {\n      prefix += '.';\n    }\n\n    //Set prefix\n    this.prefix = prefix;\n    return this;\n  };\n\n  /**\n   * Set enabled storage engines\n   */\n  this.setEnabledStorageEngines = function(enabledStorageEngines) {\n    if (angular.isArray(enabledStorageEngines)) {\n      this.enabledStorageEngines = enabledStorageEngines;\n    }\n    return this;\n  };\n\n  /**\n   * Set default storage engine\n   */\n  this.setDefaultStorageEngine = function(defaultStorageEngine) {\n    this.defaultStorageEngine = defaultStorageEngine;\n    return this;\n  };\n\n  /**\n   * Service getter\n   */\n  this.$get = function($parse, $injector, $log) {\n\n    //Set configuration vars locally\n    let storagePrefix = this.prefix;\n    let enabledStorageEngines = this.enabledStorageEngines;\n    let defaultStorageEngine = this.defaultStorageEngine;\n\n    //Cached engine service instances\n    let engineServices = {};\n\n    /**\n     * Get storage engine service name\n     */\n    function getEngineServiceName(engine) {\n      return '$' + engine + 'Storage';\n    }\n\n    /**\n     * Get storage engine service instance\n     */\n    function getEngineService(engine) {\n\n      //Cached?\n      if (engineServices[engine]) {\n        return engineServices[engine];\n      }\n\n      //Get the engine service\n      let serviceName = getEngineServiceName(engine);\n      let engineService = $injector.get(serviceName);\n\n      //Not supported\n      if (engine !== 'memory' && !engineService.isSupported()) {\n\n        //Determine fallback\n        let fallback;\n        if (angular.isFunction(engineService.getFallbackEngine)) {\n          fallback = engineService.getFallbackEngine();\n        }\n\n        //Validate fallback and log warning\n        fallback = fallback || 'memory';\n        $log.warn(\n          'Storage engine', engine, 'not supported in this browser.',\n          'Using fallback engine', fallback, 'instead.'\n        );\n\n        //Get fallback engine\n        engineService = getEngineService(fallback);\n      }\n\n      //Cache and return the service\n      return (engineServices[engine] = engineService);\n    }\n\n    /**\n     * Get prefixed key\n     */\n    function getPrefixedKey(key) {\n      return key ? (storagePrefix + key) : '';\n    }\n\n    /**\n     * Test if string only contains numbers\n     */\n    function isStringNumber(string) {\n      return /^-?\\d+\\.?\\d*$/.test(string.replace(/[\"']/g, ''));\n    }\n\n    /**\n     * Test if string is a boolean\n     */\n    function isStringBoolean(string) {\n      return (string === 'false' || string === 'true');\n    }\n\n    /**\n     * Test if a string is an object/array\n     */\n    function isStringObject(string) {\n      return (string.charAt(0) === '{' || string.charAt(0) === '[');\n    }\n\n    /**\n     * Helper to parse a value for storage\n     */\n    function parseValue(value) {\n\n      //Normalize undefined values\n      if (angular.isUndefined(value) || value === null) {\n        return null;\n      }\n\n      //Convert to JSON if not a string\n      if (\n        angular.isObject(value) ||\n        angular.isArray(value) ||\n        typeof value === 'boolean' ||\n        angular.isNumber(Number(value) || value)\n      ) {\n        return angular.toJson(value);\n      }\n\n      //Use as is\n      return value;\n    }\n\n    /**\n     * Helper to format a value from storage\n     */\n    function formatValue(value) {\n\n      //Null values (also convert string null value)\n      if (!value || value === null || value === 'null') {\n        return null;\n      }\n\n      //Parse from JSON if needed\n      if (\n        isStringObject(value) ||\n        isStringBoolean(value) ||\n        isStringNumber(value)\n      ) {\n        try {\n          return angular.fromJson(value);\n        }\n        catch (e) {\n          return null;\n        }\n      }\n\n      //Return as is\n      return value;\n    }\n\n    /*****************************************************************************\n     * Initialization\n     ***/\n\n    //Make sure the default storage engine is enabled\n    if (enabledStorageEngines.indexOf(defaultStorageEngine) === -1) {\n      throw new Error(\n        'Default storage engine', defaultStorageEngine, 'is not enabled.'\n      );\n    }\n\n    //Validate enabled storage engines\n    angular.forEach(enabledStorageEngines, function(engine) {\n      let serviceName = getEngineServiceName(engine);\n      if (!$injector.has(serviceName)) {\n        throw new Error(\n          'Storage engine', engine, 'does not exist.',\n          'Make sure the service', serviceName, 'is included as a dependency.'\n        );\n      }\n    });\n\n    /*****************************************************************************\n     * Storage engine instances class\n     ***/\n\n    /**\n     * Storage engine instance constructor\n     */\n    let StorageEngine = function(engine) {\n      this.engine = getEngineService(engine);\n    };\n\n    /**\n     * Setter\n     */\n    StorageEngine.prototype.set = function(key, value) {\n\n      //Must have a key\n      key = getPrefixedKey(key);\n      if (!key) {\n        return false;\n      }\n\n      //Parse value\n      value = parseValue(value);\n\n      //Store value\n      try {\n        this.engine.set(key, value);\n        return true;\n      }\n      catch (e) {\n        return false;\n      }\n    };\n\n    /**\n     * Getter\n     */\n    StorageEngine.prototype.get = function(key, defaultValue) {\n\n      //Default value of default value is set to null (defaultvalueception!)\n      if (typeof defaultValue === 'undefined') {\n        defaultValue = null;\n      }\n\n      //Must have a key\n      key = getPrefixedKey(key);\n      if (!key) {\n        return defaultValue;\n      }\n\n      //Get value and return formatted\n      try {\n        let value = this.engine.get(key);\n        if (value === null) {\n          return defaultValue;\n        }\n        return formatValue(value);\n      }\n      catch (e) {\n        return defaultValue;\n      }\n    };\n\n    /**\n     * Remover\n     */\n    StorageEngine.prototype.remove = function(key) {\n\n      //Must have a key\n      key = getPrefixedKey(key);\n      if (!key) {\n        return false;\n      }\n\n      //Remove\n      try {\n        this.engine.remove(key);\n        return true;\n      }\n      catch (e) {\n        return false;\n      }\n    };\n\n    /**\n     * Clear, optionally prefixed\n     */\n    StorageEngine.prototype.clear = function(prefix) {\n      prefix = storagePrefix + (prefix || '');\n      this.engine.clear(prefix);\n    };\n\n    /*****************************************************************************\n     * Exposed storage service\n     ***/\n\n    //Create default storage engine service and initialize engines cache\n    let Storage = new StorageEngine(defaultStorageEngine);\n    let StorageEngines = {};\n\n    //Store ourselves in the cache as the default storage engine\n    StorageEngines[defaultStorageEngine] = Storage;\n\n    //Create dynamic properties for all enabled storage engines\n    angular.forEach(enabledStorageEngines, function(engine) {\n      Object.defineProperty(Storage, engine, {\n\n        /*jshint -W083 */\n        get: function() {\n          if (StorageEngines[engine]) {\n            return StorageEngines[engine];\n          }\n          return (StorageEngines[engine] = new StorageEngine(engine));\n        },\n      });\n    });\n\n    //Return\n    return Storage;\n  };\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n/* global inject */\n\n/**\n * Specifications\n */\ndescribe('Storage', function() {\n\n  //Load module and service\n  beforeEach(module('Storage.Service'));\n  beforeEach(module('ngCookies'));\n\n  //Inject storage\n  let $storage;\n  beforeEach(inject(function(_$storage_) {\n    $storage = _$storage_;\n  }));\n\n  //Storage engines\n  let engines = ['memory', 'session', 'local', 'cookie'];\n\n  //Loop each engine\n  for (let i = 0; i < engines.length; i++) {\n\n    //Get engine\n    let engine = engines[i];\n    let StorageEngine;\n    beforeEach(function() {\n      StorageEngine = $storage[engine];\n    });\n\n    /**\n     * Test each engine\n     */\n    describe('engine ' + engine, function() {\n\n      /**\n      * Private interface\n      */\n      describe('private interface', function() {\n        it('should have a setter', function() {\n          expect(typeof StorageEngine.engine.set).toBe('function');\n        });\n        it('should have a getter', function() {\n          expect(typeof StorageEngine.engine.get).toBe('function');\n        });\n        it('should have a remover', function() {\n          expect(typeof StorageEngine.engine.remove).toBe('function');\n        });\n        it('should have a clearer', function() {\n          expect(typeof StorageEngine.engine.clear).toBe('function');\n        });\n      });\n\n      /**\n       * Public interface\n       */\n      describe('public interface', function() {\n        it('should have a setter', function() {\n          expect(typeof StorageEngine.set).toBe('function');\n        });\n        it('should have a getter', function() {\n          expect(typeof StorageEngine.get).toBe('function');\n        });\n        it('should have a remover', function() {\n          expect(typeof StorageEngine.remove).toBe('function');\n        });\n        it('should have a clearer', function() {\n          expect(typeof StorageEngine.clear).toBe('function');\n        });\n      });\n\n      /**\n       * Storage\n       */\n      describe('storage', function() {\n\n        //Set test key\n        let testKey;\n        beforeEach(function() {\n          testKey = 'test';\n        });\n\n        /**\n         * String values\n         */\n        it('should be able to store string values', function() {\n          let testValue = 'test';\n          StorageEngine.set(testKey, testValue);\n          let storedValue = StorageEngine.get(testKey);\n          expect(storedValue).toBe(testValue);\n          expect(typeof storedValue).toBe(typeof testValue);\n        });\n\n        /**\n         * Overriding values\n         */\n        it('should override values set with the same key', function() {\n          StorageEngine.set(testKey, 'a');\n          StorageEngine.set(testKey, 'b');\n          StorageEngine.set(testKey, 'c');\n          let storedValue = StorageEngine.get(testKey);\n          expect(storedValue).toBe('c');\n        });\n\n        /**\n         * Integer values\n         */\n        it('should be able to store integer values', function() {\n          let testValues = [1, -1, 0];\n          for (let i = 0; i < testValues.length; i++) {\n            StorageEngine.set(testKey, testValues[i]);\n            let storedValue = StorageEngine.get(testKey);\n            expect(storedValue).toBe(testValues[i]);\n            expect(typeof storedValue).toBe(typeof testValues[i]);\n          }\n        });\n\n        /**\n         * Boolean values\n         */\n        it('should be able to store boolean values', function() {\n          let testValues = [true, false];\n          for (let i = 0; i < testValues.length; i++) {\n            StorageEngine.set(testKey, testValues[i]);\n            let storedValue = StorageEngine.get(testKey);\n            expect(storedValue).toBe(testValues[i]);\n            expect(typeof storedValue).toBe(typeof testValues[i]);\n          }\n        });\n\n        /**\n         * Float values\n         */\n        it('should be able to store float values', function() {\n          let testValues = [1.234, -1.234, 0.0];\n          for (let i = 0; i < testValues.length; i++) {\n            StorageEngine.set(testKey, testValues[i]);\n            let storedValue = StorageEngine.get(testKey);\n            expect(storedValue).toBe(testValues[i]);\n            expect(typeof storedValue).toBe(typeof testValues[i]);\n          }\n        });\n\n        /**\n         * Undefined/null values\n         */\n        it('should return null for undefined and null values', function() {\n          let testValues = [undefined, null];\n          for (let i = 0; i < testValues.length; i++) {\n            StorageEngine.set(testKey, testValues[i]);\n            let storedValue = StorageEngine.get(testKey);\n            expect(storedValue).toBeNull();\n          }\n        });\n\n        /**\n         * Arrays\n         */\n        it('should be able to store arrays', function() {\n          let testValue = ['a', 1, 1.234, null];\n          StorageEngine.set(testKey, testValue);\n          let storedValue = StorageEngine.get(testKey);\n          expect(storedValue).toEqual(testValue);\n          for (let i = 0; i < testValue.length; i++) {\n            expect(storedValue).toContain(testValue[i]);\n          }\n        });\n\n        /**\n         * Nested arrays\n         */\n        it('should be able to store nested arrays', function() {\n          let testValue = ['a', 1, ['b', 2, 3.456]];\n          StorageEngine.set(testKey, testValue);\n          let storedValue = StorageEngine.get(testKey);\n          expect(storedValue).toEqual(testValue);\n          expect(storedValue[2]).toEqual(testValue[2]);\n          for (let i = 0; i < testValue[2].length; i++) {\n            expect(storedValue[2]).toContain(testValue[2][i]);\n          }\n        });\n\n        /**\n         * Object values\n         */\n        it('should be able to store objects', function() {\n          let testValue = {\n            a: 'a',\n            b: 1,\n            c: 1.234,\n            d: null,\n            e: {\n              f: 'b',\n              g: 2,\n              h: ['c', 3, 3.456, null],\n            },\n          };\n          StorageEngine.set(testKey, testValue);\n          let storedValue = StorageEngine.get(testKey);\n          expect(storedValue).toEqual(testValue);\n          expect(typeof storedValue).toBe(typeof testValue);\n        });\n      });\n\n      /**\n       * Removal\n       */\n      describe('removal', function() {\n\n        //Set test key\n        let testKey;\n        beforeEach(function() {\n          testKey = 'test';\n        });\n\n        /**\n         * Removal\n         */\n        it('should be able to remove stored values of all types', function() {\n          let testValues = ['a', 1, 1.234, null, {a: 'a'}, ['a', 1]];\n          for (let i = 0; i < testValues.length; i++) {\n            StorageEngine.set(testKey, testValues[i]);\n            StorageEngine.remove(testKey);\n            let storedValue = StorageEngine.get(testKey);\n            expect(storedValue).toBeNull();\n          }\n        });\n      });\n\n      /**\n       * Clearing\n       */\n      describe('clearing', function() {\n\n        /**\n         * All values\n         */\n        it('should clear all set values', function() {\n          let testValue = 'test';\n          let testKeys = ['a', 'b', 'c'];\n          let i;\n          for (i = 0; i < testKeys.length; i++) {\n            StorageEngine.set(testKeys[i], testValue);\n          }\n          StorageEngine.clear();\n          for (i = 0; i < testKeys.length; i++) {\n            let storedValue = StorageEngine.get(testKeys[i]);\n            expect(storedValue).toBeNull();\n          }\n        });\n\n        /**\n         * Prefixed values\n         */\n        it('should clear prefixed values', function() {\n          let testValue = 'test';\n          let testKeys = ['pre.a', 'pre.b', 'pre.c'];\n          let i;\n          for (i = 0; i < testKeys.length; i++) {\n            StorageEngine.set(testKeys[i], testValue);\n          }\n          StorageEngine.clear('pre.');\n          for (i = 0; i < testKeys.length; i++) {\n            let storedValue = StorageEngine.get(testKeys[i]);\n            expect(storedValue).toBeNull();\n          }\n        });\n\n        /**\n         * Prefixed values\n         */\n        it('should only clear prefixed values', function() {\n          let testValue = 'test';\n          let testKeys = ['pre.a', 'pre.b', 'pre.c', 'a', 'b', 'c'];\n          let i;\n          for (i = 0; i < testKeys.length; i++) {\n            StorageEngine.set(testKeys[i], testValue);\n          }\n          StorageEngine.clear('pre.');\n          for (i = 0; i < testKeys.length; i++) {\n            let storedValue = StorageEngine.get(testKeys[i]);\n            if (testKeys[i].length === 1) {\n              expect(storedValue).toBe(testValue);\n            }\n            else {\n              expect(storedValue).toBeNull();\n            }\n          }\n        });\n      });\n    });\n  }\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Storage.CookieStorage.Service', [])\n\n/**\n * Cookie storage engine service\n */\n.factory('$cookieStorage', function $cookieStorage($injector, $log) {\n\n  //Get cookies service\n  let $cookies;\n  if ($injector.has('$cookies')) {\n    $cookies = $injector.get('$cookies');\n  }\n  else {\n    $log.warn('Cookie storage requires the `ngCookies` module as a dependency');\n  }\n\n  /**\n   * Storage engine interface\n   */\n  return {\n\n    /**\n     * Check if supported\n     */\n    isSupported: function() {\n      return !!$cookies;\n    },\n\n    /**\n     * Get fallback engine\n     */\n    getFallbackEngine: function() {\n      return 'memory';\n    },\n\n    /**\n     * Set an item\n     */\n    set: function(key, value) {\n      $cookies.put(key, value);\n    },\n\n    /**\n     * Get an item\n     */\n    get: function(key) {\n      return $cookies.get(key);\n    },\n\n    /**\n     * Remove an item\n     */\n    remove: function(key) {\n      $cookies.remove(key);\n    },\n\n    /**\n     * Clear items\n     */\n    clear: function(prefix) {\n\n      //Get all the cookies and corresponding keys\n      let prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n      let cookies = $cookies.getAll();\n      let keys = cookies ? Object.keys(cookies) : [];\n\n      //Loop keys\n      for (let k = 0; k < keys.length; k++) {\n        if (!prefix || prefixRegex.test(keys[k])) {\n          $cookies.remove(keys[k]);\n        }\n      }\n    },\n  };\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Storage.LocalStorage.Service', [])\n\n/**\n * Local storage engine service\n */\n.factory('$localStorage', function $localStorage($window) {\n\n  /**\n   * Storage engine interface\n   */\n  return {\n\n    /**\n     * Check if supported\n     */\n    isSupported: function() {\n\n      //Prepare test key\n      let key = '___' + Math.round(Math.random() * 1e7);\n\n      //Try local storage\n      try {\n        $window.localStorage.setItem(key, '');\n        $window.localStorage.removeItem(key);\n        return true;\n      }\n      catch (e) {\n        return false;\n      }\n    },\n\n    /**\n     * Get fallback engine\n     */\n    getFallbackEngine: function() {\n      return 'cookie';\n    },\n\n    /**\n     * Set an item\n     */\n    set: function(key, value) {\n      $window.localStorage.setItem(key, value);\n    },\n\n    /**\n     * Get an item\n     */\n    get: function(key) {\n      return $window.localStorage.getItem(key);\n    },\n\n    /**\n     * Remove an item\n     */\n    remove: function(key) {\n      $window.localStorage.removeItem(key);\n    },\n\n    /**\n     * Clear items\n     */\n    clear: function(prefix) {\n\n      //Get regex for prefix and keys\n      let prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n      let keys = Object.keys($window.localStorage);\n\n      //Loop keys\n      for (let k = 0; k < keys.length; k++) {\n        if (!prefix || prefixRegex.test(keys[k])) {\n          $window.localStorage.removeItem(keys[k]);\n        }\n      }\n    },\n  };\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Storage.MemoryStorage.Service', [])\n\n/**\n * Memory storage engine service\n */\n.factory('$memoryStorage', function $memoryStorage() {\n\n  /**\n   * Store\n   */\n  let memoryStore = {};\n\n  /**\n   * Storage engine interface\n   */\n  return {\n\n    /**\n     * Always supported\n     */\n    isSupported: function() {\n      return true;\n    },\n\n    /**\n     * Get fallback engine\n     */\n    getFallbackEngine: function() {\n      return '';\n    },\n\n    /**\n     * Set an item\n     */\n    set: function(key, value) {\n      memoryStore[key] = value;\n    },\n\n    /**\n     * Get an item\n     */\n    get: function(key) {\n      if (typeof memoryStore[key] === 'undefined') {\n        return null;\n      }\n      return memoryStore[key];\n    },\n\n    /**\n     * Remove an item\n     */\n    remove: function(key) {\n      if (typeof memoryStore[key] !== 'undefined') {\n        delete memoryStore[key];\n      }\n    },\n\n    /**\n     * Clear items\n     */\n    clear: function(prefix) {\n\n      //Get regex for prefix and keys\n      let prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n      let keys = Object.keys(memoryStore);\n\n      //Loop keys\n      for (let k = 0; k < keys.length; k++) {\n        if (!prefix || prefixRegex.test(keys[k])) {\n          delete memoryStore[keys[k]];\n        }\n      }\n    },\n  };\n});\n\n})(window, window.angular);\n","(function(window, angular, undefined) {'use strict';\n\n/**\n * Module definition and dependencies\n */\nangular.module('Storage.SessionStorage.Service', [])\n\n/**\n * Session storage engine service\n */\n.factory('$sessionStorage', function $sessionStorage($window) {\n\n  /**\n   * Storage engine interface\n   */\n  return {\n\n    /**\n     * Check if supported\n     */\n    isSupported: function() {\n\n      //Prepare test key\n      let key = '___' + Math.round(Math.random() * 1e7);\n\n      //Try session storage\n      try {\n        $window.sessionStorage.setItem(key, '');\n        $window.sessionStorage.removeItem(key);\n        return true;\n      }\n      catch (e) {\n        return false;\n      }\n    },\n\n    /**\n     * Get fallback engine\n     */\n    getFallbackEngine: function() {\n      return 'memory';\n    },\n\n    /**\n     * Set an item\n     */\n    set: function(key, value) {\n      $window.sessionStorage.setItem(key, value);\n    },\n\n    /**\n     * Get an item\n     */\n    get: function(key) {\n      return $window.sessionStorage.getItem(key);\n    },\n\n    /**\n     * Remove an item\n     */\n    remove: function(key) {\n      $window.sessionStorage.removeItem(key);\n    },\n\n    /**\n     * Clear items\n     */\n    clear: function(prefix) {\n\n      //Get regex for prefix and keys\n      let prefixRegex = prefix ? new RegExp('^' + prefix) : null;\n      let keys = Object.keys($window.sessionStorage);\n\n      //Loop keys\n      for (let k = 0; k < keys.length; k++) {\n        if (!prefix || prefixRegex.test(keys[k])) {\n          $window.sessionStorage.removeItem(keys[k]);\n        }\n      }\n    },\n  };\n});\n\n})(window, window.angular);\n"]}